<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<title>Lotteria - Test Tabellone</title>
<style>
  #numberGrid {
    display: grid;
    grid-template-columns: repeat(10, 50px);
    gap: 5px;
    max-width: 550px;
    margin: 20px auto;
  }
  .number {
    width: 50px;
    height: 50px;
    border: 1px solid #333;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    user-select: none;
  }
  .reserved {
    background: #ccc;
    cursor: not-allowed;
  }
</style>
</head>
<body>

<h2>Tabellone Lotteria</h2>
<div id="numberGrid"></div>

<script>
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz7Gpi2niPycyDQpEd_mgzVHwf50QS7Ilp5WbWG5llqPIEPsk9V3xBUrhpEKkBSgT8s/exec';
const grid = document.getElementById('numberGrid');

async function loadReservations() {
  try {
    const res = await fetch(SCRIPT_URL);
    if (!res.ok) throw new Error('Errore caricamento');
    const data = await res.json();
    renderGrid(data);
  } catch (e) {
    grid.innerHTML = '<p>Errore caricamento prenotazioni</p>';
    console.error(e);
  }
}

function renderGrid(reservations) {
  grid.innerHTML = '';
  for(let i = 1; i <= 90; i++) {
    const div = document.createElement('div');
    div.classList.add('number');
    if(reservations[i]) {
      div.classList.add('reserved');
      div.textContent = i + '\n' + reservations[i];
      div.title = `Prenotato da ${reservations[i]}`;
    } else {
      div.textContent = i;
    }
    grid.appendChild(div);
  }
}

loadReservations();
</script>

</body>
</html>
